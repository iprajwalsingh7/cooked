{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/prajw/Documents/projects/Cooked-SpotifyRoast/app/roast/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function RoastPage() {\r\n    const [roast, setRoast] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        const fetchRoast = async () => {\r\n\r\n            const urlParams = new URLSearchParams(window.location.search);\r\n            let sessionId = urlParams.get('session_id');\r\n\r\n            if (sessionId) {\r\n\r\n                localStorage.setItem('session_id', sessionId);\r\n                window.history.replaceState({}, '', '/roast');\r\n            } else {\r\n\r\n                sessionId = localStorage.getItem('session_id');\r\n            }\r\n\r\n            if (!sessionId) {\r\n                setError('Unauthorized: No session found. Please try connecting again.');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const res = await fetch('/api/roast', {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${sessionId}`\r\n                    },\r\n                    cache: 'no-store'\r\n                });\r\n\r\n                if (res.status === 401) {\r\n                    localStorage.removeItem('session_id'); // Clear invalid session\r\n                    setError('Unauthorized: Session expired or invalid.');\r\n                    return;\r\n                }\r\n                if (!res.ok) {\r\n                    throw new Error('Failed to fetch roast');\r\n                }\r\n                const data = await res.json();\r\n                setRoast(data.roast);\r\n            } catch (err) {\r\n                setError('Something went wrong. Maybe your taste is too bad to roast?');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchRoast();\r\n    }, [router]);\r\n\r\n    return (\r\n        <main className=\"min-h-screen flex flex-col items-center justify-center p-6 relative overflow-hidden\">\r\n\r\n            <div className=\"absolute top-[-20%] right-[-10%] w-[60vw] h-[60vw] bg-red-500/10 rounded-full blur-[120px] pointer-events-none\" />\r\n\r\n            <div className=\"container max-w-3xl relative z-10 text-center\">\r\n                {loading ? (\r\n                    <div className=\"flex flex-col items-center\">\r\n                        <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-8\"></div>\r\n                        <h2 className=\"text-2xl font-bold animate-pulse\">Analyzing your questionable choices...</h2>\r\n                        <p className=\"text-gray-400 mt-2\">Judging your top artists...</p>\r\n                    </div>\r\n                ) : error ? (\r\n                    <div className=\"text-center\">\r\n                        <h2 className=\"text-3xl font-bold text-red-500 mb-4\">Error</h2>\r\n                        <p className=\"text-xl mb-8\">{error}</p>\r\n                        <Link href=\"/\" className=\"btn-primary\">Try Again</Link>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"animate-in fade-in slide-in-from-bottom-8 duration-700\">\r\n                        <span className=\"text-primary text-sm font-bold tracking-widest uppercase mb-4 block\">The Verdict</span>\r\n                        <div className=\"glass-panel mb-10 p-8 md:p-12\">\r\n                            <p className=\"text-xl md:text-2xl leading-relaxed font-medium text-white shadow-black drop-shadow-md whitespace-pre-wrap\">\r\n                                \"{roast}\"\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-4 justify-center\">\r\n                            <Link href=\"/\" className=\"px-6 py-3 rounded-full border border-white/20 hover:bg-white/10 transition-colors\">\r\n                                Go Back\r\n                            </Link>\r\n                            <button onClick={() => window.location.reload()} className=\"btn-primary\">\r\n                                Roast Me Again\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACN,MAAM,aAAa;YAEf,MAAM,YAAY,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;YAC5D,IAAI,YAAY,UAAU,GAAG,CAAC;YAE9B,IAAI,WAAW;gBAEX,aAAa,OAAO,CAAC,cAAc;gBACnC,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI;YACxC,OAAO;gBAEH,YAAY,aAAa,OAAO,CAAC;YACrC;YAEA,IAAI,CAAC,WAAW;gBACZ,SAAS;gBACT,WAAW;gBACX;YACJ;YAEA,IAAI;gBACA,MAAM,MAAM,MAAM,MAAM,cAAc;oBAClC,SAAS;wBACL,iBAAiB,CAAC,OAAO,EAAE,WAAW;oBAC1C;oBACA,OAAO;gBACX;gBAEA,IAAI,IAAI,MAAM,KAAK,KAAK;oBACpB,aAAa,UAAU,CAAC,eAAe,wBAAwB;oBAC/D,SAAS;oBACT;gBACJ;gBACA,IAAI,CAAC,IAAI,EAAE,EAAE;oBACT,MAAM,IAAI,MAAM;gBACpB;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,SAAS,KAAK,KAAK;YACvB,EAAE,OAAO,KAAK;gBACV,SAAS;YACb,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG;QAAC;KAAO;IAEX,qBACI,8OAAC;QAAK,WAAU;;0BAEZ,8OAAC;gBAAI,WAAU;;;;;;0BAEf,8OAAC;gBAAI,WAAU;0BACV,wBACG,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAG,WAAU;sCAAmC;;;;;;sCACjD,8OAAC;4BAAE,WAAU;sCAAqB;;;;;;;;;;;2BAEtC,sBACA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;sCAC7B,8OAAC,uKAAI;4BAAC,MAAK;4BAAI,WAAU;sCAAc;;;;;;;;;;;yCAG3C,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAK,WAAU;sCAAsE;;;;;;sCACtF,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC;gCAAE,WAAU;;oCAA6G;oCACpH;oCAAM;;;;;;;;;;;;sCAIhB,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,uKAAI;oCAAC,MAAK;oCAAI,WAAU;8CAAoF;;;;;;8CAG7G,8OAAC;oCAAO,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;oCAAI,WAAU;8CAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrG"}}]
}